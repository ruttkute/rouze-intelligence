<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart - Rouze Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #F8F6F0; }
        
        nav { position: fixed; top: 0; left: 0; right: 0; background: rgba(248, 246, 240, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(232, 197, 209, 0.2); padding: 20px 0; z-index: 1000; }
        .nav-container { max-width: 1400px; margin: 0 auto; padding: 0 40px; display: flex; justify-content: space-between; align-items: center; }
        .nav-logo { font-family: 'Playfair Display', serif; font-size: 24px; font-weight: 600; font-style: italic; color: #2C2C2C; text-decoration: none; }
        .nav-menu { display: flex; gap: 40px; list-style: none; }
        .nav-menu a { color: #2C2C2C; text-decoration: none; font-weight: 500; font-size: 14px; text-transform: uppercase; letter-spacing: 0.05em; }
        
        .container { max-width: 1200px; margin: 120px auto 60px; padding: 0 40px; }
        h1 { font-family: 'Playfair Display', serif; font-size: 42px; margin-bottom: 40px; }
        
        .cart-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; }
        
        .cart-items { background: white; padding: 40px; border-radius: 12px; }
        .cart-item { padding: 30px 0; border-bottom: 1px solid #E0E0E0; display: flex; justify-content: space-between; align-items: center; }
        .item-details h3 { font-size: 20px; margin-bottom: 8px; }
        .item-details p { color: #666; font-size: 14px; }
        .item-price { font-size: 24px; font-weight: 700; color: #E8C5D1; }
        .remove-btn { background: #E74C3C; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 13px; }
        
        .cart-summary { background: white; padding: 40px; border-radius: 12px; height: fit-content; position: sticky; top: 100px; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #F0F0F0; }
        .summary-total { display: flex; justify-content: space-between; font-size: 24px; font-weight: 700; margin-top: 20px; padding-top: 20px; border-top: 2px solid #E8C5D1; }
        
        .discount-section { margin: 25px 0; }
        .discount-section input { width: 100%; padding: 14px; border: 2px solid #E0E0E0; border-radius: 8px; margin-bottom: 10px; }
        .discount-section button { width: 100%; background: #E8C5D1; color: white; border: none; padding: 14px; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .discount-applied { background: #E8F5E9; padding: 15px; border-radius: 8px; margin-top: 15px; color: #4CAF50; font-weight: 600; }
        
        .checkout-btn { width: 100%; background: linear-gradient(135deg, #E8C5D1, #D4A5B8); color: white; border: none; padding: 18px; border-radius: 50px; cursor: pointer; font-weight: 600; font-size: 16px; text-transform: uppercase; letter-spacing: 0.05em; margin-top: 20px; }
        .checkout-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(232, 197, 209, 0.4); }
        
        .empty-cart { text-align: center; padding: 80px 40px; background: white; border-radius: 12px; }
        .empty-cart h2 { font-family: 'Playfair Display', serif; font-size: 28px; margin-bottom: 20px; color: #666; }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="/" class="nav-logo">ROUZE</a>
            <ul class="nav-menu">
                <li><a href="/about">About</a></li>
                <li><a href="/services">Services</a></li>
                <li><a href="/methodology">Methodology</a></li>
                <li><a href="/cart">Cart</a></li>
                <li><a href="/">Home</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <h1>Shopping Cart</h1>
        
        <div class="cart-grid" id="cartContent">
            <!-- Cart items will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Sample cart data (in production, this would come from session/database)
        let cart = JSON.parse(localStorage.getItem('rouze_cart') || '[]');
        let discountCode = null;
        let discountPercent = 0;

        function renderCart() {
            const cartContent = document.getElementById('cartContent');
            
            if (cart.length === 0) {
                cartContent.innerHTML = `
                    <div class="empty-cart" style="grid-column: 1/-1;">
                        <h2>Your cart is empty</h2>
                        <p style="color: #666; margin-bottom: 30px;">Browse our intelligence services and add items to your cart.</p>
                        <a href="/services" style="display: inline-block; background: #E8C5D1; color: white; padding: 14px 35px; border-radius: 50px; text-decoration: none; font-weight: 600;">
                            Browse Services
                        </a>
                    </div>
                `;
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            const discountAmount = subtotal * (discountPercent / 100);
            const total = subtotal - discountAmount;

            cartContent.innerHTML = `
                <div class="cart-items">
                    ${cart.map((item, index) => `
                        <div class="cart-item">
                            <div class="item-details">
                                <h3>${item.service}</h3>
                                <p>${item.tier} - ${item.industry}</p>
                            </div>
                            <div style="text-align: right;">
                                <div class="item-price">$${item.price.toLocaleString()}</div>
                                <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="cart-summary">
                    <h3 style="margin-bottom: 25px;">Order Summary</h3>
                    
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span>$${subtotal.toLocaleString()}</span>
                    </div>
                    
                    ${discountPercent > 0 ? `
                        <div class="summary-row" style="color: #4CAF50;">
                            <span>Discount (${discountPercent}%)</span>
                            <span>-$${discountAmount.toLocaleString()}</span>
                        </div>
                    ` : ''}
                    
                    <div class="discount-section">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Discount Code</label>
                        <input type="text" id="discountInput" placeholder="Enter code (LAUNCH50, FIRST20, etc.)" value="${discountCode || ''}">
                        <button onclick="applyDiscount()">Apply Code</button>
                        ${discountPercent > 0 ? `
                            <div class="discount-applied">
                                Discount code applied successfully!
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="summary-total">
                        <span>Total</span>
                        <span style="color: #E8C5D1;">$${total.toLocaleString()}</span>
                    </div>
                    
                    <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
                </div>
            `;
        }

        function removeItem(index) {
            cart.splice(index, 1);
            localStorage.setItem('rouze_cart', JSON.stringify(cart));
            renderCart();
        }

        async function applyDiscount() {
            const code = document.getElementById('discountInput').value.toUpperCase();
            if (!code) return;

            const response = await fetch('/api/validate-discount', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({code: code})
            });

            const result = await response.json();
            
            if (result.valid) {
                discountCode = code;
                discountPercent = result.discount;
                renderCart();
            } else {
                alert('Invalid discount code. Try: LAUNCH50, FIRST20, AFFILIATE15, HEALTHCARE25');
            }
        }

        function checkout() {
            if (cart.length === 0) return;
            
            alert('Checkout functionality coming soon! For now, please contact us directly with your cart items.');
            // In production, this would redirect to Stripe checkout or payment processor
        }

        // Add demo item for testing
        if (cart.length === 0) {
            // Uncomment to add demo item:
            // cart.push({
            //     service: 'Healthcare Intelligence',
            //     tier: 'Risk Assessment',
            //     industry: 'Pharmaceutical',
            //     price: 3500
            // });
            // localStorage.setItem('rouze_cart', JSON.stringify(cart));
        }

        renderCart();
    </script>
</body>
</html>
